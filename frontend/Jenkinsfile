//Jenkinsfile Frontend (Declarative Pipeline)
pipeline {
    agent any

    options {
                buildDiscarder(logRotator(daysToKeepStr: '30'))
                disableConcurrentBuilds()
                timestamps()
                timeout(time: 20, unit: 'MINUTES')
}

    stages {
        stage('Build Frontend'){
            

            steps {
            //withCredentials([usernamePassword(credentialsId: 'dockerhub', passwordVariable: 'pass', usernameVariable: 'user')]) 
            {    

                bat "docker build -f frontend\\Dockerfile -t vitvizel/timeapp-jenkins-frontend:1.0.${env.BUILD_NUMBER} ."
            }
            }
        }            
        stage('Push Frontend')  { 
            steps { 
                withCredentials([usernamePassword(credentialsId: 'dockerhub', passwordVariable: 'pass', usernameVariable: 'user')])     
                bat "docker login -u $user -p $pass"
                bat "docker push vitvizel/timeapp-jenkins-frontend:1.0.${env.BUILD_NUMBER}"
            }

        }
           
        }
    

            post {
                
                always {
                deleteDir() /* clean up our workspace */
        }
                }
    }



